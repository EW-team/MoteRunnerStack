A!	bcw-1.0.01825	2.0	C#

X	c:01/000	com.ibm.saguaro.system.Assembly
X	c:01/001	com.ibm.saguaro.system.Device
X	c:01/002	com.ibm.saguaro.system.Timer
X	c:01/003	com.ibm.saguaro.system.Time
X	c:01/004	com.ibm.saguaro.system.MoteException
X	c:01/005	com.ibm.saguaro.system.SDev
X	c:01/006	com.ibm.saguaro.system.SPI
X	c:01/007	com.ibm.saguaro.system.OutOfResourcesException
X	c:01/008	com.ibm.saguaro.system.OsException
X	c:01/009	com.ibm.saguaro.system.NullReferenceException
X	c:01/00A	com.ibm.saguaro.system.SystemException
X	c:01/00B	com.ibm.saguaro.system.Mote
X	c:01/00C	com.ibm.saguaro.system.CDev
X	c:01/00D	com.ibm.saguaro.system.LIP
X	c:01/00E	com.ibm.saguaro.system.LED
X	c:01/00F	com.ibm.saguaro.system.InvalidCastException
X	c:01/010	com.ibm.saguaro.system.IndexOutOfRangeException
X	c:01/011	com.ibm.saguaro.system.I2C
X	c:01/012	com.ibm.saguaro.system.GPIO
X	c:01/013	com.ibm.saguaro.system.Float
X	c:01/014	com.ibm.saguaro.system.Err
X	c:01/015	com.ibm.saguaro.system.DeviceException
X	c:01/016	com.ibm.saguaro.system.UART
X	c:01/017	com.ibm.saguaro.system.Lora
X	c:01/018	com.ibm.saguaro.system.Util
X	c:01/019	com.ibm.saguaro.system.ArrayTypeMismatchException
X	c:01/01A	com.ibm.saguaro.system.ArithmException
X	c:01/01B	com.ibm.saguaro.system.ArgumentException
X	c:01/01C	com.ibm.saguaro.system.AccessException
X	c:01/01D	com.ibm.saguaro.system.ADC
X	c:02/000	com.ibm.saguaro.lrsc.Mac

C!	c:004	mr_test.BlinkCounterWireless	-1	0	c:000
R	txTimer	r:com.ibm.saguaro.system.Timer	0	0
F	counter	i	0	0
F	SPAN_TICKS	l	0	1
M!	BlinkCounterWireless(r:mr_test.BlinkCounterWireless)v	-1	m:0026	0004C	24
M!	onRxCallback(b,b[],u,u)v	-1	m:0032	00064	48
M!	onTimeCallback(b,l)v	-1	m:004A	00094	12

C	c:006	com.ibm.saguaro.system.$tatics	-1	-1	c:01/000
r	mr_test.BlinkCounterWireless.txTimer	r:com.ibm.saguaro.system.Timer	-1	0
f	mr_test.BlinkCounterWireless.counter	i	-1	0
f	mr_test.BlinkCounterWireless.SPAN_TICKS	l	-1	1
M	__init()v	-1	m:0010	00020	44

e	0004C	m:0010
l!	0004F	00063	r:mr_test.BlinkCounterWireless	this	m:0026	0
c	00051	0	17	0	17	0	m:0026
c	00058	0	18	0	18	0	m:0026
c	00062	0	19	0	19	0	m:0026
e!	00064	m:0026
c	00067	0	23	0	23	0	m:0032
l!	00067	00093	b	port	m:0032	0
l!	00067	00093	b[]	paybuf	m:0032	1
l!	00067	00093	u	payoff	m:0032	2
l!	00067	00093	u	paylen	m:0032	3
c	0006B	0	24	0	24	0	m:0032
c	0007F	0	26	0	26	0	m:0032
c	00085	0	28	0	28	0	m:0032
c	00092	0	29	0	29	0	m:0032
e!	00094	m:0032
c	00097	0	32	0	32	0	m:004A
l!	00097	000A0	b	param	m:004A	0
l!	00097	000A0	l	time	m:004A	1
c	0009F	0	33	0	33	0	m:004A
e!	000A0	m:004A
S	/home/loki/MoteRunnerStack/mr_test/BlinkCounterWireless.cs
:	using System;
:	
:	namespace mr_test
:	{
:		using com.ibm.saguaro.system;
:		using com.ibm.saguaro.lrsc;
:		
:		public class BlinkCounterWireless
:		{
:			
:			private static Timer txTimer = new Timer();
:			private static int counter = 0;
:			private static long SPAN_TICKS = Time.toTickSpan (Time.SECONDS, 5 + Util.rand16()%5);
:			
:			public BlinkCounterWireless ()
:			{
:				Mac.setRxHandler(onRxCallback); 
:				txTimer.setCallback(onTimeCallback);
:			}
:		
:		    public static void onRxCallback (byte port, byte[] paybuf, uint payoff, uint paylen) {
:		        // get counter value from paybuf
:		        if (paylen > 1)
:		        	counter = ((paybuf[payoff] & 0xff) << 8) & paybuf[payoff+1];
:		        else
:		        	counter = paybuf[payoff];
:		        
:		        txTimer.setAlarmTime(Time.currentTicks() + SPAN_TICKS);
:		    }
:			
:			public static void onTimeCallback(byte param, long time) {
:				counter ++;
:			}
:		}
:	}
:	
:	
:	
